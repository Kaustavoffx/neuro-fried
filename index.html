<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEURO-FRIED: CHRONO SINGULARITY</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:wght@700&family=VT323&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@900&display=swap');

        :root {
            /* Core Palette */
            --bg-color: #050505;
            --primary: #b026ff;
            --secondary: #00f3ff;
            --accent: #39ff14;
            --danger: #ff003c;
            --warning: #fff200;
            
            --font-main: 'Courier Prime', monospace;
            --font-pixel: 'VT323', monospace;
            --font-display: 'Orbitron', sans-serif;
        }

        /* --- DYNAMIC THEMES (Changes with Era) --- */
        body.theme-1990 { --primary: #ff71ce; --secondary: #01cdfe; --bg-color: #1a0b2e; } /* Vaporwave */
        body.theme-2000 { --primary: #00ff00; --secondary: #003300; --bg-color: #001100; } /* Matrix */
        body.theme-2010 { --primary: #ffffff; --secondary: #888888; --bg-color: #202020; } /* Minimal */
        body.theme-2020 { --primary: #ff0055; --secondary: #00ccff; --bg-color: #050505; } /* Cyberpunk */

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: white;
            font-family: var(--font-main);
            height: 100vh;
            overflow: hidden;
            user-select: none;
            transition: background-color 1s ease;
        }

        /* --- VISUALS: NOISE & WARP --- */
        .noise-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 50;
            opacity: 0.4;
        }

        #chrono-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
        }

        .scanlines {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 60;
        }

        /* --- HUD (The Brutalist Asymmetry You Liked) --- */
        .hud-element {
            position: absolute;
            z-index: 100;
            font-size: 1.1rem;
            text-transform: uppercase;
            padding: 8px 12px;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            clip-path: polygon(0 0, 100% 0, 100% 70%, 90% 100%, 0 100%);
            border-left: 3px solid var(--secondary);
        }

        #hud-top-left { top: 25px; left: 25px; transform: rotate(-1deg); }
        #hud-top-right { 
            top: 25px; right: 25px; 
            border-left: none; 
            border-right: 3px solid var(--warning);
            clip-path: polygon(0 0, 100% 0, 100% 100%, 10% 100%, 0 70%);
            color: var(--warning);
            transform: rotate(1deg);
        }
        #hud-bottom-right { 
            bottom: 25px; right: 25px; 
            font-weight: bold; 
            color: var(--primary);
            background: transparent;
            clip-path: none;
            border: none;
            font-size: 2rem;
            font-family: var(--font-pixel);
            letter-spacing: 5px;
            opacity: 0.7;
        }

        /* --- SCREENS --- */
        .screen {
            position: absolute;
            width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 80;
            transition: opacity 0.5s;
        }
        .hidden { opacity: 0; pointer-events: none; display: none !important; }

        /* --- LANDING PAGE (Restored Vibe + New Features) --- */
        h1.glitch-title {
            font-family: var(--font-display);
            font-size: 7vw;
            color: white;
            margin: 0;
            line-height: 0.9;
            text-transform: uppercase;
            text-align: center;
            text-shadow: 5px 5px 0px rgba(176, 38, 255, 0.3);
            animation: textFloat 4s ease-in-out infinite;
        }

        @keyframes textFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .subtitle {
            font-family: var(--font-main);
            color: var(--accent);
            letter-spacing: 3px;
            margin-top: 10px;
            margin-bottom: 30px;
            background: rgba(0,0,0,0.5);
            padding: 5px 15px;
            transform: skewX(-10deg);
        }

        .mission-log {
            font-family: var(--font-pixel);
            color: #ccc;
            background: rgba(255,255,255,0.05);
            padding: 15px 30px;
            border: 1px solid #333;
            margin-bottom: 40px;
            text-align: center;
            line-height: 1.5;
            font-size: 1.2rem;
            max-width: 500px;
        }

        /* --- TECH PLATES (The Buttons You Liked) --- */
        .tech-btn {
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            border: none;
            padding: 25px 40px;
            font-family: var(--font-pixel);
            font-size: 1.6rem;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.2s;
            clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
            box-shadow: inset 0 0 0 2px rgba(255,255,255,0.1);
        }

        .tech-btn::after {
            content: '';
            position: absolute;
            bottom: 0; right: 0;
            width: 30px; height: 30px;
            background: linear-gradient(135deg, transparent 50%, var(--primary) 50%);
            z-index: -1;
            transition: 0.3s;
        }

        .tech-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: var(--accent);
            transform: translate(-2px, -2px);
            box-shadow: inset 0 0 0 2px var(--accent);
            text-shadow: 0 0 8px var(--accent);
        }
        .tech-btn:hover::after { width: 100%; height: 100%; background: var(--accent); opacity: 0.1; }

        /* --- GAME UI --- */
        #timer-wrapper {
            width: 60%;
            height: 12px;
            background: #111;
            margin-bottom: 30px;
            transform: skewX(-20deg);
            border: 1px solid #444;
            overflow: hidden;
        }
        #timer-bar { width: 100%; height: 100%; background: var(--accent); box-shadow: 0 0 15px var(--accent); }

        .question-box {
            font-size: 2rem;
            text-align: center;
            max-width: 800px;
            margin-bottom: 40px;
            line-height: 1.3;
            color: #eee;
            padding: 30px;
            background: rgba(0,0,0,0.6);
            border-top: 2px solid var(--secondary);
            border-bottom: 2px solid var(--secondary);
            background: linear-gradient(90deg, rgba(0,243,255,0) 0%, rgba(0,243,255,0.05) 50%, rgba(0,243,255,0) 100%);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            width: 85%;
            max-width: 1200px;
        }

        .option-btn {
            font-size: 1.4rem;
            padding: 30px 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100px;
        }

        /* --- FX --- */
        .rewind-fx { animation: rewindAnim 1s ease-in-out; }
        @keyframes rewindAnim {
            0% { filter: invert(0); transform: scale(1); }
            50% { filter: invert(1) hue-rotate(180deg); transform: scale(1.1) rotate(-5deg); }
            100% { filter: invert(0); transform: scale(1); }
        }

        @media (max-width: 800px) {
            .options-grid { grid-template-columns: 1fr; }
            h1.glitch-title { font-size: 15vw; }
        }
    </style>
</head>
<body>

    <canvas id="chrono-canvas"></canvas>
    <div class="noise-overlay"></div>
    <div class="scanlines"></div>

    <div id="hud-top-left" class="hud-element">
        <span style="font-size:0.8rem; opacity:0.7">SCORE_DB://</span><br>
        <span id="score-val" style="color:var(--accent); font-size:1.4rem;">0</span>
    </div>
    <div id="hud-top-right" class="hud-element">
        <span style="font-size:0.8rem; opacity:0.7">REWIND STATUS://</span><br>
        <span id="rewind-val">ONLINE</span>
    </div>
    <div id="hud-bottom-right" class="hud-element">NOVICE</div>

    <div id="landing-page" class="screen">
        <h1 class="glitch-title">NEURO<br>FRIED</h1>
        <div class="subtitle">/// CHRONO_SINGULARITY_VER_3.0 ///</div>
        
        <div class="mission-log">
            [MISSION PROTOCOL]<br>
            > ANSWER TRIVIA TO STABILIZE TIMELINE<br>
            > TIME ACCELERATES EVERY ROUND<br>
            > [1] REWIND AVAILABLE PER SESSION
        </div>

        <button class="tech-btn" id="start-btn">INITIALIZE SYSTEM</button>
    </div>

    <div id="era-transition" class="screen hidden">
        <div style="font-family: var(--font-pixel); letter-spacing: 5px; font-size: 2rem;">WARPING TO ERA...</div>
        <h1 id="year-counter" style="font-family: var(--font-display); font-size: 8rem; margin: 20px 0; color: var(--secondary);">1990</h1>
    </div>

    <div id="game-ui" class="screen hidden">
        <div class="era-display" id="era-display" style="opacity: 0.8; letter-spacing: 5px; margin-bottom: 10px;">YEAR: 1990</div>
        <div id="timer-wrapper"><div id="timer-bar"></div></div>
        
        <div class="question-box">
            <span style="color:var(--secondary); font-size: 0.8rem; display:block; margin-bottom:10px;">>> INCOMING QUERY:</span>
            <span id="question-text">Loading Data...</span>
        </div>
        
        <div class="options-grid" id="options-area"></div>
    </div>

    <div id="game-over" class="screen hidden">
        <h1 class="glitch-title" style="font-size: 4rem; color: var(--danger); text-shadow: none;">FATAL<br>ERROR</h1>
        <div style="font-size: 1.5rem; margin-bottom: 30px; text-align: center; font-family: var(--font-main);">
            <p>TIMELINE SEVERED.</p>
            <p>FINAL AURA: <span id="final-score" style="color:var(--accent)">0</span></p>
        </div>
        <button class="tech-btn" id="retry-btn">REBOOT SYSTEM</button>
    </div>

    <script>
        // --- 1. PROCEDURAL MUSIC ENGINE ---
        const AudioEngine = {
            ctx: null, isPlaying: false, notes: [110, 130.81, 146.83, 164.81, 196.00], noteIndex: 0, tempo: 200, interval: null,
            init() { this.ctx = new (window.AudioContext || window.webkitAudioContext)(); },
            playNote(freq, type, dur, vol) {
                if(!this.ctx) return; const o=this.ctx.createOscillator(); const g=this.ctx.createGain();
                o.type=type; o.frequency.setValueAtTime(freq, this.ctx.currentTime);
                g.gain.setValueAtTime(0, this.ctx.currentTime); g.gain.linearRampToValueAtTime(vol, this.ctx.currentTime+0.01); g.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime+dur);
                o.connect(g); g.connect(this.ctx.destination); o.start(); o.stop(this.ctx.currentTime+dur);
            },
            start() {
                if(this.isPlaying) return; this.isPlaying=true; if(this.ctx.state==='suspended')this.ctx.resume();
                this.interval=setInterval(()=>{ 
                    const f=this.notes[this.noteIndex%this.notes.length]; 
                    this.playNote(f,'triangle',0.3,0.1); this.playNote(f*0.5,'sine',0.5,0.2); 
                    this.noteIndex++; 
                }, this.tempo);
            },
            stop(){ clearInterval(this.interval); this.isPlaying=false; },
            speedUp(val){ this.tempo = Math.max(80, 200-(val*10)); this.stop(); this.start(); },
            sfx(type) {
                if(!this.ctx) return;
                if(type==='win'){ this.playNote(880,'sine',0.1,0.1); setTimeout(()=>this.playNote(1760,'sine',0.2,0.1),100); }
                if(type==='lose'){ this.playNote(100,'sawtooth',0.5,0.2); }
                if(type==='rewind'){
                    const o=this.ctx.createOscillator(); const g=this.ctx.createGain();
                    o.frequency.setValueAtTime(200,this.ctx.currentTime); o.frequency.linearRampToValueAtTime(1000,this.ctx.currentTime+0.5);
                    g.gain.setValueAtTime(0.2,this.ctx.currentTime); g.gain.linearRampToValueAtTime(0,this.ctx.currentTime+0.5);
                    o.connect(g); g.connect(this.ctx.destination); o.start(); o.stop(this.ctx.currentTime+0.5);
                }
            }
        };

        // --- 2. VISUALS: WARP FIELD (Particles Coming Towards You) ---
        const canvas = document.getElementById('chrono-canvas');
        const ctx = canvas.getContext('2d');
        let stars = []; let speed = 2; let reverse = false;

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        class Star {
            constructor() { this.x=(Math.random()-0.5)*canvas.width*2; this.y=(Math.random()-0.5)*canvas.height*2; this.z=Math.random()*canvas.width; }
            update() {
                if(!reverse){ this.z-=speed; if(this.z<=0){ this.z=canvas.width; this.x=(Math.random()-0.5)*canvas.width*2; this.y=(Math.random()-0.5)*canvas.height*2; } }
                else { this.z+=speed*5; if(this.z>canvas.width)this.z=1; }
            }
            draw() {
                let sx=(this.x/this.z)*canvas.width+canvas.width/2; let sy=(this.y/this.z)*canvas.height+canvas.height/2;
                let size=(1-this.z/canvas.width)*3; 
                ctx.fillStyle="white"; ctx.beginPath(); ctx.arc(sx, sy, size, 0, Math.PI*2); ctx.fill();
            }
        }
        for(let i=0; i<400; i++) stars.push(new Star());
        function animate() {
            ctx.fillStyle="rgba(0,0,0,0.3)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            stars.forEach(s=>{s.update(); s.draw();}); requestAnimationFrame(animate);
        }
        animate();

        // --- 3. LOGIC ---
        const DB = [
            {y:1990, q:"Before Google, we 'Surfed the Web' with...", a:"WorldWideWeb", w:["Chrome","Explorer"]},
            {y:1993, q:"This FPS game caused a global moral panic.", a:"DOOM", w:["Call of Duty","Halo"]},
            {y:1995, q:"Windows 95's video guide starred...", a:"Friends Cast", w:["Seinfeld","Bill Gates"]},
            {y:1998, q:"Google was founded in a...", a:"Garage", w:["Basement","Skyscraper"]},
            {y:2000, q:"The indestructible mobile phone.", a:"Nokia 3310", w:["iPhone","Blackberry"]},
            {y:2004, q:"Facebook was originally only for...", a:"Harvard", w:["Everyone","USA"]},
            {y:2007, q:"Steve Jobs released 3 devices in one.", a:"iPhone", w:["iPad","MacBook"]},
            {y:2010, q:"This app made photo filters famous.", a:"Instagram", w:["Snapchat","Vine"]},
            {y:2012, q:"First video to hit 1 Billion views.", a:"Gangnam Style", w:["Baby Shark","Despacito"]},
            {y:2016, q:"Everyone went outside to catch...", a:"Pokemon", w:["Ghosts","Dates"]},
            {y:2020, q:"The app that defined the lockdown.", a:"Zoom", w:["Skype","Teams"]},
            {y:2023, q:"The AI that writes essays for you.", a:"ChatGPT", w:["Siri","Alexa"]}
        ];

        const els = { main:document.body, land:document.getElementById('landing-page'), trans:document.getElementById('era-transition'), game:document.getElementById('game-ui'), over:document.getElementById('game-over'), score:document.getElementById('score-val'), rewind:document.getElementById('rewind-val'), timer:document.getElementById('timer-bar'), qTxt:document.getElementById('question-text'), opts:document.getElementById('options-area'), era:document.getElementById('era-display'), yc:document.getElementById('year-counter') };
        
        let state = { score:0, round:0, hasRewind:true, maxTime:4000, curTime:0, timer:null };

        function init() {
            AudioEngine.init(); AudioEngine.start();
            state = { score:0, round:0, hasRewind:true, maxTime:5000, curTime:0, timer:null };
            els.score.innerText="0"; els.rewind.innerText="ONLINE"; els.rewind.style.color="var(--secondary)";
            els.land.classList.add('hidden'); els.over.classList.add('hidden');
            speed=2; nextRound();
        }

        function nextRound() {
            if(state.round>=DB.length){ state.round=0; state.maxTime*=0.8; }
            let d = DB[state.round];
            
            // Visuals
            els.game.classList.add('hidden'); els.trans.classList.remove('hidden');
            els.yc.innerText = d.y;
            els.main.className=""; 
            if(d.y>=1990)els.main.classList.add('theme-1990');
            if(d.y>=2000)els.main.classList.add('theme-2000');
            if(d.y>=2010)els.main.classList.add('theme-2010');
            if(d.y>=2020)els.main.classList.add('theme-2020');

            setTimeout(()=>{
                els.trans.classList.add('hidden'); els.game.classList.remove('hidden');
                els.era.innerText="ERA: "+d.y; els.qTxt.innerText=d.q; els.qTxt.style.color="#eee";
                els.opts.innerHTML="";
                let op = [d.a, ...d.w].sort(()=>Math.random()-0.5);
                op.forEach(o=>{
                    let b=document.createElement('button'); b.className="tech-btn option-btn"; b.innerText=o;
                    b.onclick=()=>check(o,d.a); els.opts.appendChild(b);
                });
                startTimer();
            }, 1200);
        }

        function startTimer(){
            if(state.timer) clearInterval(state.timer);
            state.curTime=state.maxTime;
            speed = 2+(state.round*0.5); AudioEngine.speedUp(state.round);
            state.timer=setInterval(()=>{
                state.curTime-=20; els.timer.style.width=(state.curTime/state.maxTime)*100+"%";
                if(state.curTime<=0){ clearInterval(state.timer); fail(); }
            },20);
        }

        function check(ans, cor){
            if(ans===cor){
                clearInterval(state.timer); AudioEngine.sfx('win');
                state.score+=100+Math.ceil(state.curTime/10); els.score.innerText=state.score;
                state.round++; nextRound();
            } else fail();
        }

        function fail(){
            clearInterval(state.timer);
            if(state.hasRewind){
                state.hasRewind=false; els.rewind.innerText="OFFLINE"; els.rewind.style.color="var(--danger)";
                AudioEngine.sfx('rewind'); reverse=true; document.body.classList.add('rewind-fx');
                els.qTxt.innerHTML="<span style='color:var(--warning)'>âš  PARADOX DETECTED. REWINDING...</span>";
                setTimeout(()=>{
                    reverse=false; document.body.classList.remove('rewind-fx');
                    state.maxTime+=1000; startTimer(); els.qTxt.innerText=DB[state.round].q;
                }, 1000);
            } else {
                AudioEngine.sfx('lose'); AudioEngine.stop();
                els.game.classList.add('hidden'); els.over.classList.remove('hidden');
                document.getElementById('final-score').innerText=state.score;
            }
        }

        document.getElementById('start-btn').onclick=init;
        document.getElementById('retry-btn').onclick=init;
    </script>
</body>
</html>